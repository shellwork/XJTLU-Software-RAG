import{_ as t,c as o,a0 as a,o as n}from"./chunks/framework.DgZgdyI2.js";const u=JSON.parse('{"title":"API","description":"","frontmatter":{},"headers":[],"relativePath":"docs/functions/api.md","filePath":"docs/functions/api.md"}'),r={name:"docs/functions/api.md"};function i(d,e,s,c,p,l){return n(),o("div",null,e[0]||(e[0]=[a('<h1 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-label="Permalink to &quot;API&quot;">​</a></h1><p>We built the code in the api file using the FastAPI framework to create a backend service primarily designed for managing and operating a document-based knowledge base system. It handles file uploads, OCR processing, and various other functionalities.</p><h2 id="libraries-imported" tabindex="-1">Libraries imported <a class="header-anchor" href="#libraries-imported" aria-label="Permalink to &quot;Libraries imported&quot;">​</a></h2><p><code>sys</code>, <code>uuid</code>, <code>Path</code>: Used for handling system paths and generating unique batch IDs.</p><p><code>logging</code>: Used for recording log information, aiding in debugging and tracking system behavior.</p><p><code>fastapi</code> related importers: Used to create API routes and handle HTTP requests.</p><p><code>tqdm</code>：To create progress bar prompts.</p><h2 id="configuration-and-initialization" tabindex="-1">Configuration and Initialization <a class="header-anchor" href="#configuration-and-initialization" aria-label="Permalink to &quot;Configuration and Initialization&quot;">​</a></h2><p><code>current_dir</code> and <code>project_root</code>：Retrieve the current file path and the project root directory, add the root directory to the system path to ensure modules can be imported from it.</p><p>app.mount(&quot;/uploads&quot;)：Mounts the <code>data/uploads</code> directory as a static file directory, providing direct access to uploaded files.</p><h2 id="api-routes" tabindex="-1">API Routes <a class="header-anchor" href="#api-routes" aria-label="Permalink to &quot;API Routes&quot;">​</a></h2><p><strong>· Chat Interface (<code>/api/chat</code>):</strong></p><p>Handles chat requests by calling the generate_response function to produce an AI-generated reply.</p><p><strong>· Get Document Interface (<code>/api/document</code>):</strong></p><p>Retrieves the content of a specified document based on the <code>source</code> parameter (document path). It can return either text files (e.g., <code>.txt</code>, <code>.json</code>, <code>.csv</code>) or image files (e.g., <code>.png</code>, <code>.jpg</code>), returning either the file content or the file URL, respectively.</p><p><strong>· File Upload Interface (<code>/upload_files</code>):</strong></p><p>Allows users to upload files, generating a unique batch ID for each upload. It supports parameters like file chunk size and overlap settings.</p><p>Uploaded files are saved to the knowledge base, and the system updates the corresponding metadata for the knowledge base.</p><p><strong>· Create Knowledge Base Interface (<code>/create_kb</code>):</strong></p><p>Used to create a new knowledge base, accepting parameters such as the knowledge base name, type, and embedding model.</p><p><strong>· Get Knowledge Base List Interface (<code>/get_kb_list</code>):</strong></p><p>Returns a list of all created knowledge bases.</p><p><strong>· Get Documents in Knowledge Base Interface (<code>/get_kb_documents</code>):</strong></p><p>Retrieves a list of all documents within a specified knowledge base.</p><p><strong>· Rebuild Vector Store Interface (<code>/rebuild_vector_store</code>):</strong></p><p>Reprocesses and vectorizes the documents in a specified knowledge base, with the option to delete the existing vector store and rebuild it.</p><p><strong>· Delete Knowledge Base Interface (<code>/delete_kb</code>):</strong></p><p>Deletes the specified knowledge base along with its contents.</p><p><strong>· Delete Files from Knowledge Base Interface (<code>/delete_kb_files</code>):</strong></p><p>Deletes specified files from a knowledge base.</p>',30)]))}const h=t(r,[["render",i]]);export{u as __pageData,h as default};
